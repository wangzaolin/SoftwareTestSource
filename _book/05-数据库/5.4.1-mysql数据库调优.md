# mysql调优

# 1、MYSQL性能的主要因素

1）数据库结构设计

2）数据库存储引擎

3）SQL语句的书写

4）数据库参数配置

5）服务器操作系统和硬件

# 2、数据库设计三范式

第一范式：

数据库所有字段都只有单一属性，且不可被拆分



第二范式：

属性完全依赖于主键

1）符合第一范式

2）表必须有一个主键（由1列或多列组成）

3）其他字段和主键有从属关系



第三范式：

属性和主键不能间接相关（减少数据冗余，通过主外键进行表之间的连接）

1）符合第二范式

2）属性要和主键要有直接关系，而不是间接关系



# 3、表关系设计

1）一对一，通过主键关联

2）一对多，在多的一方设置外键，外键为一的主键

3）多对多，增加中间表，持有双方外键

案例：

班级、学生、课程和学籍档案

实体关系：![image-20210324200821199](D:\GitBook\SoftwareSource\mybook\img\image-20210324200821199.png)

表关系：

![image-20210324200919424](D:\GitBook\SoftwareSource\mybook\img\image-20210324200919424.png)

# 4、数据类型的选择

字段类型优先级：

数字类型>日期类型或二进制类型>字符串类型

- 整型类型：

tinyint，1字节，-128~127

smallint，2字节

mediumint，3字节

int，4字节

bigint，8字节

- 实数类型

float，4字节

double，8字节

decimal，9字节，小数点占1个字节

- varchar类型：根据实际内容保存数据

1）使用最小的符合需求的长度；

2）varchar(5)和varchar(200)内存占用不同，后者占用内存更多；

3）varchar变更长度会出现锁表；

varchar使用场景：

1）适合存储长度波动大的场景，例如博客文章；

2）字符串很少被更新的场景

- char类型：定长数据

1）char最大长度255

2）char类型会自动删除末尾空格

3）char检索、读写效率比varchar高

char使用场景：

1）适合存储长度波动不大的数据

2）适合存储短字符串

3）适合存储经常更新的字符串

- datetime类型

1）占用8个字节

2）可保存到毫秒

3）可保存时间范围大

- timestamp时间戳

1）占用4个字节；

2）时间范围：19700101-20380119

3）精确到秒

4）采用整型存储

5）依赖时区











 